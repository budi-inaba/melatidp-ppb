<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Verifikasi Pesanan</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 min-h-screen flex items-center justify-center">

<div class="bg-white p-8 rounded-2xl shadow-xl w-full max-w-md text-center">
  <h1 class="text-xl font-bold mb-4">Verifikasi Pesanan</h1>

  <div id="loading" class="text-gray-500">Memuat data...</div>

  <div id="result" class="hidden space-y-2 text-sm mt-4">
    <p><strong>ID:</strong> <span id="v-id"></span></p>
    <p><strong>Nama:</strong> <span id="v-nama"></span></p>
    <p><strong>KK:</strong> <span id="v-kk"></span></p>
    <p><strong>Komoditas:</strong> <span id="v-produk"></span></p>
  </div>

</div>

<script>
const GOOGLE_SCRIPT_URL = "https://script.google.com/macros/s/AKfycbybd12TC0zbGlS8-yMzmNy7hnHuQsDyMqdQLquYP3yd21rVt4mD2AK0FCWK0tirevd5bA/exec";

function getParam(name) {
  const urlParams = new URLSearchParams(window.location.search);
  return urlParams.get(name);
}

async function loadData() {
  const id = getParam('id');
  if(!id) {
    document.getElementById('loading').innerText = "ID tidak ditemukan";
    return;
  }

  try {
    const res = await fetch(GOOGLE_SCRIPT_URL + "?action=getById&id=" + id);
    const data = await res.json();

    document.getElementById('loading').classList.add('hidden');
    document.getElementById('result').classList.remove('hidden');

    document.getElementById('v-id').innerText = data.id;
    document.getElementById('v-nama').innerText = data.nama_pemilik;
    document.getElementById('v-kk').innerText = data.kk;
    document.getElementById('v-produk').innerText = data.produk;

  } catch(e) {
    document.getElementById('loading').innerText = "Gagal mengambil data";
  }
}

loadData();
</script>

</body>
</html>
